#!/usr/bin/make -f

export PYBUILD_NAME=heikodiscopi

%:
	dh $@ --with python3

override_dh_auto_build:
	python3 -m build --wheel --no-isolation

override_dh_auto_install:
	python3 -m installer --destdir=debian/heikodiscopi --prefix=/usr dist/*.whl
	# Debian packages must not ship anything under /usr/local.
	# Some Python sysconfig schemes default scripts to /usr/local/bin, so relocate.
	if [ -d debian/heikodiscopi/usr/local/bin ]; then \
		mkdir -p debian/heikodiscopi/usr/bin; \
		mv debian/heikodiscopi/usr/local/bin/* debian/heikodiscopi/usr/bin/ || true; \
	fi
	rm -rf debian/heikodiscopi/usr/local
